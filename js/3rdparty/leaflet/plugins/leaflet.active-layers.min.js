L.Control.ActiveLayers=L.Control.Layers.extend({getActiveBaseLayer:function(){return this._activeBaseLayer},getActiveOverlayLayers:function(){return this._activeOverlayLayers},onAdd:function(e){var a=L.Control.Layers.prototype.onAdd.call(this,e);return this._activeBaseLayer=this._findActiveBaseLayer(),this._activeOverlayLayers=this._findActiveOverlayLayers(),a},_findActiveBaseLayer:function(){var e=this._layers;for(var a in e)if(this._layers.hasOwnProperty(a)){var r=e[a];if(!r.overlay&&this._map.hasLayer(r.layer))return r}throw Error("Control doesn't have any active base layer!")},_findActiveOverlayLayers:function(){var e={},a=this._layers;for(var r in a)if(this._layers.hasOwnProperty(r)){var t=a[r];t.overlay&&this._map.hasLayer(t.layer)&&(e[r]=t)}return e},_onInputClick:function(){var e,a,r,t,i=this._form.getElementsByTagName("input"),s=i.length;for(this._handlingClick=!0,e=0;s>e;e++)a=i[e],r=this._layers[a.layerId],a.checked&&!this._map.hasLayer(r.layer)?(this._map.addLayer(r.layer),r.overlay?this._activeOverlayLayers[a.layerId]=r:(t=r.layer,this._activeBaseLayer=r)):!a.checked&&this._map.hasLayer(r.layer)&&(this._map.removeLayer(r.layer),r.overlay&&delete this._activeOverlayLayers[a.layerId]);t&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:t})),this._handlingClick=!1}}),L.control.activeLayers=function(e,a,r){return new L.Control.ActiveLayers(e,a,r)};